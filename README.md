# å³æ¢¦4.0 API å›¾ç‰‡ç”Ÿæˆå·¥å…·

ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Pythonå·¥å…·ï¼Œç”¨äºè°ƒç”¨å³æ¢¦4.0 APIç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸš€ æ”¯æŒæ–‡æœ¬ç”Ÿæˆå›¾ç‰‡
- ğŸ“ æ‰¹é‡ç”ŸæˆåŠŸèƒ½ï¼Œæ”¯æŒå¤šç»„æç¤ºè¯
- ğŸ¨ å¤šç§å°ºå¯¸é€‰æ‹©ï¼Œæœ€é«˜æ”¯æŒ4Kåˆ†è¾¨ç‡
- ğŸ’¾ è‡ªåŠ¨ä¿å­˜ç”Ÿæˆçš„å›¾ç‰‡
- ğŸ”§ ä¸°å¯Œçš„å‚æ•°é…ç½®ï¼ˆç§å­ã€æ°´å°ã€æ–‡æœ¬å½±å“ç¨‹åº¦ç­‰ï¼‰
- ğŸ” æ”¯æŒç«å±±å¼•æ“APIçš„HMAC-SHA256ç­¾åè®¤è¯
- ğŸŒ æä¾›Flaskç½‘é¡µç•Œé¢ï¼Œæ–¹ä¾¿ç›´è§‚æ“ä½œ

## å®‰è£…æŒ‡å—

### å‰ç½®è¦æ±‚

- Python 3.7+
- ç«å±±å¼•æ“è´¦å·åŠAccess Key/Secret Keyï¼ˆå¯ä»[ç«å±±å¼•æ“](https://www.volcengine.com/)è·å–ï¼‰

### å®‰è£…æ­¥éª¤

1. å…‹éš†æˆ–ä¸‹è½½æœ¬é¡¹ç›®
```bash
git clone https://github.com/qiuhe2023/jimeng4_image_generator.git
cd jimeng4_image_generator
```

2. å®‰è£…ä¾èµ–åŒ…
```bash
pip install -r requirements.txt
```

3. é…ç½®APIå¯†é’¥
   - å¤åˆ¶`.env.example`æ–‡ä»¶ä¸º`.env`
   - ç¼–è¾‘`.env`æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ç«å±±å¼•æ“Access Keyå’ŒSecret Key
```bash
cp .env.example .env
nano .env
```

## ä½¿ç”¨è¯´æ˜

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# ä½¿ç”¨å•ä¸ªæç¤ºè¯ç”Ÿæˆå›¾ç‰‡
python main.py --prompt "A beautiful landscape with mountains and lake at sunset"

# æŒ‡å®šå°ºå¯¸ç”Ÿæˆå›¾ç‰‡
python main.py --prompt "A futuristic city skyline" --size 2560x1440

# ç”Ÿæˆå¤šå¼ å›¾ç‰‡
python main.py --prompt "A cute cat" --count 3

# ä¸æ·»åŠ æ°´å°
python main.py --prompt "A portrait of a knight" --no-watermark
```

### æ‰¹é‡ç”Ÿæˆ

```bash
# ä»æ–‡ä»¶åŠ è½½æç¤ºè¯æ‰¹é‡ç”Ÿæˆ
python main.py --file example_prompts.txt

# æŒ‡å®šè¾“å‡ºç›®å½•
python main.py --file example_prompts.txt --output my_artworks
```

### é«˜çº§ç”¨æ³•

```bash
# æŒ‡å®šéšæœºç§å­ï¼ˆå¯å¤ç°ç»“æœï¼‰
python main.py --prompt "A sushi platter" --seed 12345

# è°ƒæ•´æ–‡æœ¬å½±å“ç¨‹åº¦
python main.py --prompt "A dragon flying over a castle" --scale 0.8

# é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šå¯†é’¥
python main.py --prompt "A cozy cabin" --access-key YOUR_ACCESS_KEY --secret-key YOUR_SECRET_KEY
```

### å‘½ä»¤è¡Œå‚æ•°è¯´æ˜

| å‚æ•° | ç¼©å†™ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--prompt` | `-p` | å›¾ç‰‡ç”Ÿæˆæç¤ºè¯ | æ—  |
| `--file` | `-f` | åŒ…å«æç¤ºè¯çš„æ–‡æœ¬æ–‡ä»¶è·¯å¾„ | æ—  |
| `--size` | `-s` | å›¾ç‰‡å°ºå¯¸ï¼Œå¦‚'2048x2048' | `2048x2048` |
| `--count` | `-c` | ç”Ÿæˆå›¾ç‰‡æ•°é‡ | `1` |
| `--output` | `-o` | è¾“å‡ºç›®å½• | `output` |
| `--access-key` | `-ak` | ç«å±±å¼•æ“Access Key | ä»ç¯å¢ƒå˜é‡è·å– |
| `--secret-key` | `-sk` | ç«å±±å¼•æ“Secret Key | ä»ç¯å¢ƒå˜é‡è·å– |
| `--no-watermark` | æ—  | ä¸æ·»åŠ æ°´å° | `False` |
| `--seed` | æ—  | éšæœºç§å­ï¼Œ-1è¡¨ç¤ºéšæœº | `-1` |
| `--scale` | æ—  | æ–‡æœ¬å½±å“ç¨‹åº¦ï¼Œ0-1ä¹‹é—´ | `0.5` |

## ç½‘é¡µç•Œé¢ä½¿ç”¨

æœ¬é¡¹ç›®æä¾›äº†ä¸€ä¸ªåŸºäºFlaskçš„ç½‘é¡µç•Œé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ“ä½œï¼š

1. å¯åŠ¨WebæœåŠ¡
```bash
python app.py
```

2. è®¿é—®ç½‘é¡µ
   - æœ¬åœ°åœ°å€: http://127.0.0.1:5001
   - ç½‘ç»œåœ°å€: http://æ‚¨çš„IPåœ°å€:5001

3. åœ¨ç½‘é¡µç•Œé¢ä¸­ï¼Œæ‚¨å¯ä»¥ï¼š
   - è¾“å…¥æç¤ºè¯
   - é€‰æ‹©å›¾ç‰‡å°ºå¯¸
   - è®¾ç½®ç”Ÿæˆæ•°é‡
   - è°ƒæ•´å…¶ä»–å‚æ•°
   - æŸ¥çœ‹ç”Ÿæˆå†å²å’Œç»“æœé¢„è§ˆ

## é¡¹ç›®ç»“æ„

```
jimeng4_image_generator/
â”œâ”€â”€ app.py              # Flask WebæœåŠ¡
â”œâ”€â”€ main.py             # æ ¸å¿ƒåŠŸèƒ½å®ç°
â”œâ”€â”€ requirements.txt    # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ example_prompts.txt # ç¤ºä¾‹æç¤ºè¯
â”œâ”€â”€ templates/          # ç½‘é¡µæ¨¡æ¿
â”‚   â””â”€â”€ index.html      # ä¸»é¡µé¢
â””â”€â”€ static/             # é™æ€èµ„æº
    â”œâ”€â”€ style.css       # æ ·å¼æ–‡ä»¶
    â””â”€â”€ script.js       # JavaScriptäº¤äº’
```

## æ³¨æ„äº‹é¡¹

1. APIå¯†é’¥å®‰å…¨ï¼šè¯·å¦¥å–„ä¿ç®¡æ‚¨çš„Access Keyå’ŒSecret Keyï¼Œä¸è¦æ³„éœ²ç»™ä»–äºº
2. ç”Ÿæˆé™åˆ¶ï¼šå…è´¹é¢åº¦å¯èƒ½æœ‰é™ï¼Œè¯·åˆç†ä½¿ç”¨
3. æç¤ºè¯æŠ€å·§ï¼š
   - å°½é‡è¯¦ç»†æè¿°æ‚¨æƒ³è¦çš„å›¾åƒ
   - å¯ä»¥æŒ‡å®šè‰ºæœ¯é£æ ¼ã€è‰²å½©ã€æ„å›¾ç­‰
   - ä¸­è‹±æ–‡å‡å¯ï¼Œå»ºè®®ä¸è¶…è¿‡300ä¸ªæ±‰å­—

## è®¸å¯è¯

MIT License